<!DOCTYPE html>
<html>
  <head>
    <script src="https://pixijs.download/release/pixi.min.js"></script>
    <style>
        body {
            margin: 0;
        }
    </style>
  </head>
  <body>
    <script>
        const texts = `
            赵钱孙李周吴郑王
            冯陈褚卫蒋沈韩杨
            朱秦尤许何吕施张
            孔曹严华金魏陶姜
            戚谢邹喻柏水窦章
            云苏潘葛奚范彭郎
            鲁韦昌马苗凤花方
            俞任袁柳酆鲍史唐
            费廉岑薛雷贺倪汤
            滕殷罗毕郝邬安常
            乐于时傅皮卞齐康
            伍余元卜顾孟平黄
            和穆萧尹姚邵湛汪
            祁毛禹狄米贝明臧
            计伏成戴谈宋茅庞
            熊纪舒屈项祝董梁
            杜阮蓝闵席季麻强
            贾路娄危江童颜郭
            梅盛林刁钟徐邱骆
            高夏蔡田樊胡凌霍
            虞万支柯昝管卢莫
            经房裘缪干解应宗
            丁宣贲邓郁单杭洪
            包诸左石崔吉钮龚
            程嵇邢滑裴陆荣翁
            荀羊於惠甄曲家封
            芮羿储靳汲邴糜松
            井段富巫乌焦巴弓
            牧隗山谷车侯宓蓬
            全郗班仰秋仲伊宫
            宁仇栾暴甘钭厉戎
            祖武符刘景詹束龙
            叶幸司韶郜黎蓟薄
            印宿白怀蒲邰从鄂
            索咸籍赖卓蔺屠蒙
            池乔阴鬱胥能苍双
            闻莘党翟谭贡劳逄
            姬申扶堵冉宰郦雍
            郤璩桑桂濮牛寿通
            边扈燕冀郏浦尚农
            温别庄晏柴瞿阎充
            慕连茹习宦艾鱼容
            向古易慎戈廖庾终
            暨居衡步都耿满弘
            匡国文寇广禄阙东
            欧殳沃利蔚越夔隆
            师巩厍聂晁勾敖融
            冷訾辛阚那简饶空
            曾毋沙乜养鞠须丰
            巢关蒯相查后荆红
            游竺权逯盖益桓公
            万俟司马上官欧阳
            夏侯诸葛闻人东方
            赫连皇甫尉迟公羊
            澹台公冶宗政濮阳
            淳于单于太叔申屠
            公孙仲孙轩辕令狐
            钟离宇文长孙慕容
            鲜于闾丘司徒司空
            丌官司寇仉督子车
            颛孙端木巫马公西
            漆雕乐正壤驷公良
            拓跋夹谷宰父谷梁
            晋楚闫法汝鄢涂钦
            段干百里东郭南门
            呼延归海羊舌微生
            岳帅缑亢况郈有琴
            梁丘左丘东门西门
            商牟佘佴伯赏南宫
            墨哈谯笪年爱阳佟
            第五言福百家姓终
        `
        const textArr = texts.replace(/\s/g, '').split('')
        const length = textArr.length

        const app = new PIXI.Application({ background: '#1099bb', resizeTo: window });
        document.body.appendChild(app.view);

        const container = new PIXI.Container();
        app.stage.addChild(container);

        const style = new PIXI.TextStyle({
            fontFamily: 'Arial',
            fontSize: 24,
            fontWeight: 'bold',
            fill: ['#ffffff', '#00ff99'], // gradient
            stroke: '#4a1850',
            strokeThickness: 5
        });

        // create a texture from an image path
        const textureRefresh = PIXI.Sprite.from('./img/bunny.png');
        textureRefresh.position.set(app.screen.width / 2, app.screen.height - 200)
        textureRefresh.interactive = true;
        textureRefresh.cursor = 'pointer'
        textureRefresh.scale.set(3);
        app.stage.addChild(textureRefresh)
        textureRefresh.on('pointerdown', renderBunnys);

        renderBunnys()

        function renderBunnys() {
            console.log('重新生成')
            container.removeChildren()
            for (let i = 0; i < 50; i++) {
                const random = Math.floor(Math.random()*length)
                createBunny(
                    Math.floor(Math.random() * app.screen.width),
                    Math.floor(Math.random() * app.screen.height),
                    textArr[random]
                );
            }
        }
        function createBunny(x, y, text) {
            // create our little bunny friend..
            const bunny = new PIXI.Text(text, style)

            // enable the bunny to be interactive... this will allow it to respond to mouse and touch events
            bunny.interactive = true;

            // this button mode will mean the hand cursor appears when you roll over the bunny with your mouse
            bunny.cursor = 'pointer';

            // center the bunny's anchor point
            bunny.anchor.set(0.5);

            // setup events for mouse + touch using
            // the pointer events
            bunny.on('pointerdown', onDragStart, bunny);

            // move the sprite to its designated position
            bunny.x = x;
            bunny.y = y;

            // add it to the stage
            container.addChild(bunny)
        }

        let dragTarget = null;

        app.stage.interactive = true;
        app.stage.hitArea = app.screen;
        app.stage.on('pointerup', onDragEnd);
        app.stage.on('pointerupoutside', onDragEnd);

        function onDragMove(event)
        {
            if (dragTarget)
            {
                dragTarget.parent.toLocal(event.global, null, dragTarget.position);
            }
        }

        function onDragStart()
        {
            // store a reference to the data
            // the reason for this is because of multitouch
            // we want to track the movement of this particular touch
            // this.data = event.data;
            this.alpha = 0.5;
            dragTarget = this;
            app.stage.on('pointermove', onDragMove);
        }

        function onDragEnd()
        {
            if (dragTarget)
            {
                app.stage.off('pointermove', onDragMove);
                dragTarget.alpha = 1;
                dragTarget = null;
            }
        }
    </script>
  </body>
</html>